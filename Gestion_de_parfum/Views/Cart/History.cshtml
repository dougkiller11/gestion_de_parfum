@model List<Gestion_de_parfum.Models.Commande>
@{
    ViewData["Title"] = "Historique de commandes";
    Layout = null;
}

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Essence Luxe</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family:'Inter',sans-serif; background:#050505; color:white; margin:0; }
        .wrap { max-width: 1100px; margin:0 auto; padding:40px 20px 60px; }
        h1 { color:#d4af37; margin:0 0 18px; font-size:30px; }
        .card { background: linear-gradient(180deg, rgba(12,12,12,0.92) 0%, rgba(6,6,6,0.95) 100%); border:1px solid rgba(212,175,55,0.22); border-radius:16px; padding:22px; box-shadow:0 18px 42px rgba(0,0,0,0.38); }
        table { width:100%; border-collapse:collapse; margin-top:10px; }
        th, td { padding:10px; border-bottom:1px solid rgba(212,175,55,0.15); text-align:left; font-size:13px; }
        th { color:#d4af37; font-size:14px; }
        .status { padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px; background:rgba(212,175,55,0.12); color:#d4af37; display:inline-block; }
        .muted { color:rgba(255,255,255,0.7); font-size:13px; }
    </style>
</head>
<body>
    <div class="wrap">
        <h1>Historique de vos achats</h1>
        <div class="card">
            @if (Model != null && Model.Any())
            {
                <table>
                    <thead>
                        <tr>
                            <th>Commande</th>
                            <th>Date</th>
                            <th>Statut</th>
                            <th>Total</th>
                            <th>Détails</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var cmd in Model)
                        {
                            <tr>
                                <td>CMD-@cmd.Id.ToString("000000")</td>
                                <td>@cmd.Date.ToString("dd/MM/yyyy HH:mm")</td>
                                <td><span class="status">@(!string.IsNullOrEmpty(cmd.Statut) ? cmd.Statut : "En attente")</span></td>
                                <td>@cmd.Total.ToString("F2") €</td>
                                <td>
                                    <div class="muted">
                                        @foreach (var l in cmd.LigneCommandes)
                                        {
                                            <div>@l.Parfum?.Nom x@l.Quantite — @(l.SousTotal.ToString("F2")) €</div>
                                        }
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <div class="muted">Aucune commande pour l’instant.</div>
            }
        </div>
    </div>
</body>
</html>

